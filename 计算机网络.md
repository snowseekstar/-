计算机网络

# 第一章 计算机网络概述

计算机网络的定义：计算机网络是一些互相连接的、自治的计算机的集合。

自治：独立的计算机，拥有自己的软硬件资源

相互连接：计算机之间能够数据通信或交换资源

一、计算机网络的组成

从组成部分看：一个完整的计算机网络由硬件、软件、通信协议组成，缺一不可。硬件主要指：主机、通信链路、交换设备和通信设备等；软件主要指：用户使用的各种软件；协议指：网络传输数据时需遵循的规范。

从工作方式看：可分为边缘部分和核心部分。边缘部分由所有连接到因特网上可供用户使用的主机组成；核心部分由大量的网络和连接网络的路由器组成。

从功能组成看：计算机网络由通信子网和资源子网组成。通信子网由各种传输介质、通信设备和响应的网络协议组成；资源子网是实现资源共享功能的设备及软件的集合，向网络用户提供服务。

网络边缘（资源子网）：外围部件、主机，网络资源的使用者与提供者

网络核心（通信子网）路由器、通信链路

网络把许多计算机连接在一起

因特网把许多网络连接在一起

二、计算机网络的功能。

数据通信：网络最基本和最重要的功能，用来实现信息的传输

资源共享：使计算机网络分工协作，互通有无

分布式处理：将某个复杂任务分配给网络中的其他计算机系统

提高可靠性：计算机网络中各台计算机可以通过网络互为替代机。

负载均衡：使工作均匀地分配给各台计算机。

三、计算机网络的分类：

按分布范围分：

WAN广域网，范围通常为几十千米-几千千米

MAN城域网：几个街区或整个城市

LAN局域网：几十米到几千米

PAN个人区域网：直径约10m

按传输方式分：

广播式网络：所有计算机共享一个公共通信信道

点对点网络：每条物理线路连接一对计算机

按拓扑结构分：总线形网络、星形网络、环形、网状形

按交换技术分：

电路交换网络：在发送、接收双方建立一条专用的通路用于数据传输

报文交换网络：将数据加上地址等信息，进行转发，给每个报文自行选择路线

分组交换网络：将数据分成较小的数据块，类似报文交换，只是将报文分成更小的多个分组

按传输介质分类：分为有线网络和无线网络

四、计算机网络的性能指标

吞吐量：单位时间通过某个网络（或接口）的数据量

速率：连接到计算机网络上的主机在数字信道上传送数据的速率，也称数据率或比特率。

带宽：数据信道所能传送最高数据率。从网络上某结点到另一结点的最高传输速率。

四大时延：

从A结点向B结点发送数据：结点A中产生处理时延和排队时延，发送器产生发送时延，链路中产生传播时延。总时延是四大时延之和

发送时延：从发送数据帧的第一个比特算起，到该分组最后一个比特发送完毕所需的时间。发送时延=数据帧长度/发送速率。提高链路带宽减小数据的发送时延

传播时延：一个比特从链路一段到另一端所需的时间，传播时延=信道长度/信道在信道上的传播速率

处理时延：分析地址部分、进行差错检验等花费的时间

排队时延：在进入路由器后等待处理的时间



往返时延：从发送端发送数据开始，到发送端收到来自接收端的确认，总经历的时间

时延带宽积=传播时延x带宽

五、计算机网络结构

分层结构基本原则：每层都实现一种相对独立的功能，降低系统的复杂度。各层之间界面自然清晰，易于理解，相互交流尽可能少。

各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现。

保持下层对上层的独立性，上层单向使用下层提供的服务，整个分层结构应能促进标准化工作。

两个主机通信时，同一层在逻辑上有一条直接信道，表现为不经过下层就把信息传送给对方

网络体系结构：

OSI体系结构  五层体系结构 TCP/IP体系结构

应用层                应用层               应用层

表示层

会话层

 传输层               传输层          传输层（TCP、IP）

 网络层               网络层           网际层

数据链路层         数据链路层

​                                                  网络接口层

物理层                 物理层                



协议、接口与服务

## 课后习题

 1、计算机网络向用户可以提供哪些服务

连通性和共享



1-2 试简述分组交换的特点

分组交换实际上是在“存储——转发”基础上发展起来的，它兼有电路交换和报文交换的优点。分组交换采用动态复用技术传送按一定长度分割为许多小段的数据报文分组。每个分组标识后，在一条物理线路上采用动态复用的技术，同时传送多个数据分组。把来自用户发送端的数据分组暂存在交换机的存储器内，接着在网内转发。到达接收端再去掉分组头后将各数据字段按顺序重新装配成报文。

分组交换比电路交换的电路利用率高，比报文交换的传输时延小，交互性好



1-3 试从多个方面比较电路交换、报文交换和分组交换的主要优缺点。

电路交换：计算机终端进行·通信时，会独占一条通信线路，在整个通信过程中双方一直占用该电路。

优点是实时性强、时延小，交换设备成本较低。

缺点是线路利用率低，电路接续时间长，通信效率低，不同类型终端用户不能通信。

电路交换比较适用于信息量大、长报文，经常使用的固定用户之间的通信



报文交换 将用户的报文存储在交换机的存储器中。当所需要的输出电路空闲时再将该报文发向接收交换机或终端它以“存储——转发”方式在网内传输数据。

优点：中继电路利用率高可以多个用户同时在一条线路上传送可实现不同速率、不同规程的终端间互通。

缺点：以报文为单位进行存储转发，网络传输时延大，且占用大量的交换机内存和外存，不能满足对实时性要求高的用户。

报文交换适用于传输的报文较短、实时性要求较低的网络用户之间的通信，如公用电报网。



分组交换：分组交换实际上是在“存储——转发”基础上发展起来的，它兼有电路交换和报文交换的优点。分组交换采用动态复用技术传送按一定长度分割为许多小段的数据报文分组。每个分组标识后，在一条物理线路上采用动态复用的技术，同时传送多个数据分组。把来自用户发送端的数据分组暂存在交换机的存储器内，接着在网内转发。到达接收端再去掉分组头后将各数据字段按顺序重新装配成报文。

分组交换比电路交换的电路利用率高，比报文交换的传输时延小，交互性好



1-5 因特网的发展大致分为哪几个阶段请指出这几个阶段最主要的特点。

第一阶段是从单个网络 ARPANRET 向互联网发展的过程。最初的分组交换网 ARPANET 只是一个单个的分组交换网，所有要连接在 ARPANET 上的主机都直接与就近的结点交换机相连。而后发展为所有使用 TCP/IP 协议的计算机都能利用互联网相互通信。

第二阶段是 1985-1993 年，特点是建成了三级结构的因特网（主干网，地区网，校园网）

第三阶段是 1993 年至今特点是逐渐形成了多层次 ISP 结构的因特网。



1-8 计算机网络都有哪些类别？各种类别的网络都有哪些特点？

1、按网络覆盖的地理范围分类：

局域网、城域网、广域网

2、按传榆介质分类：

有线网：采用同轴电缆、双绞线，甚至利用有线电视电缆来连接的计算机网络。有线网通过“载波”空间进行传输信息，需要用导线来实现

无线网：用空气做传播介质，用电磁波作为载体来传播数据。

3、按网络的拓扑结构分：

星型网络、总线型网络、树型网络、环型网络、网状型网络

4、按通信方式分类：

点对点传输网络：数据以点到点的方式在计算机或通信设备中传输，在一对机器之间通过多条路径连接而成，大的网络大多采用这种方式。

广播传输网络：数据在共用通信介质线路中传输，由网络上的所有机器共享一条通信信道，适用于地理范围小的小网或保密要求不高的网络。



1-9 计算机网络中的主干网和本地接入网的主要区别是什么

主干网特点：设施共享；高度综合集成，可应付高密度的业务需求量；工作在可控环境；使用率高；技术演进迅速

本地接入网特点：设施专用，且分散独立；接入业务种类多，业务量密度低；使用率低



1-12 因特网的两大组成部分边缘部分与核心部分的特点是什么他们的工作方式各有什么特点？

答：边缘部分 由所有连接在因特网上的主机组成。这部分是用户直接使用的用来进行通信，传送数据、音频或视频和资源共享。
核心部分 由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换。）



1-13 客户服务方式与对等通信方式的主要区别是什么有没有相同的地方

客户服务器方式是一点对多点的对等通信方式是点对点的。被用户调用后运行在打算通信时主动向远地服务器发起通信请求服务。因此客户程序必须知道服务器程序的地址。系统启动后即自动调用并一直不断地运行着被动地等待并接受来自各地的客户的通信请求。因此服务器程序==不需要知道客户程序的地址。==对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机既是客户又同时是服务器。对等连接也需要知道对方的服务器地址。



1-14 计算机网络有哪些常用的性能指标

1.速率 

速率即数据率(data rate)或比特率(bit rate)是计算机网络中最重要的一个性能指标。速率的单位是 b/s或 kb/s, Mb/s, Gb/s 等。

2.带宽

“带宽”(bandwidth)本来是指信号具有的频带宽度单位是赫或千赫、兆赫、吉赫等。现在“带宽”是数字信道所能传送的“最高数据率”的同义语单位是“比特每秒”或 b/s，(bit/s)。

3.吞吐量
吞吐量(throughput)表示在单位时间内通过某个网络或信道、接口的数据量。
吞吐量受网络的带宽或网络的额定速率的限制。

4.时延
传输时延发送时延  ：发送数据时数据块从结点进入到传输媒体所需要的时间。也就是从发送数据帧的第一个比特算起到该帧的最后一个比特发送完毕所需的时间。
       5.时延带宽积
       6.往返时间 RTT
       7.利用率

1-20 网络体系结构为什么要采用分层次的结构

网络体系结构采用分层的结构可以减少协议设计的复杂性使得各层之间是独立的、增强灵活性使得网络体系结构上可以分割开，易于实现和维护，同时促进标准化工作。

1-21 协议与服务有何区别有何关系

答：协议是水平的，服务是垂直的。协议是“水平的” 即协议是控制对等实体之间的通信的规则。服务是“垂直的” 。即服务是由下层向上层通过层间接口提供的。

协议与服务的关系
         在协议的控制下，上层对下层进行调用，下层对上层进行服务，上下层间用交换原语交换信息。同层两个实体间有时有连接。

1-22 网络协议的三个要素是什么各有什么含义

在计算机网络中要做到有条不紊地交换数据就必须遵守一些事先约定好的规则。这些为进行网络中的数据交换而建立的规则、标准或约定即称为网络协议。一个网络协议要由以下三个要素组成：

1、语法即数据与控制信息的结构或格式
        2、语义即需要发出何种控制信息、完成何种动作以及做出何种应答
       3、同步即事件实现顺序的详细说明。

对于非常复杂的计算机网络协议其结构最好采用层次式的。

1-24 试述五层协议的网络体系结构的要点包括各层的主要功能

1、应用层
          应用层确定进程之间通信的性质以满足用户的需要。

应用层不仅要提供应用进程所需要的信息交换和远地操作，而且还要作为互相作用的应用进程的用户代理，来完成一些为进行语义上有意义的信息交换所必须的功能。
         2、运输层
          任务是负责主机中两个进程间的通信。
          因特网的运输层可使用两种不同的协议。即面向连接的传输控制协议 TCP 和无连接的用户数据报协议 UDP。
          面向连接的服务能够提供可靠的交付。
          无连接服务则不能提供可靠的交付。只是 尽自己最大努力

3、网络层
          网络层负责为分组选择合适的路由使源主机运输层所传下来的分组能够交付到目的主机。

4、数据链路层
          数据链路层的任务是将在网络层交下来的数据报组装成帧在两个相邻结点间的链路上实现帧的无差错传输。

5、物理层
         物理层的任务就是透明地传输比特流。
        “透明地传送比特流”指实际电路传送后比特流没有发生变化。

![image-20221205151425409](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205151425409.png)



1-26 试解释下列名词\：协议栈、实体、对等层、协议数据单元、服务访问点、客户、服务器、客户-服务器方式。

协议栈：指计算机网络体系结构采用分层模型后，每层的主要功能由对等层协议的运行来实现。因而每层可用一些主要协议来表征，几个层次画在一起很像一个栈的结构。

实体：表示任何可发送或接收信息的硬件或软件进程。在许多情况下实体是一个特定的软件模块。

对等层：在网络体系结构中通信双方实现同样功能的层。

协议数据单元：对等层实体进行信息交换的数据单位。

服务访问点：在同一系统中相邻两层的实体进行交互即交换信息的地方。服务访问点SAP 是一个抽象的概念，它实际上就是一个逻辑接口。

客户、服务器：客户和服务器都是指通信中所涉及的两个应用进程。客户-服务器方式所描述的是进程之间服务和被服务的关系。客户是服务请求方服务器是服务提供方。

客户-服务器方式：客户-服务器方式所描述的是进程之间服务和被服务的关系。当客户进程需要服务器进程提供服务时，就主动呼叫服务进程，服务器进程被动地等待来自客户进程的请求。

![image-20221205152944913](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205152944913.png)

![image-20221205153152843](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205153152843.png)

![image-20221205160303495](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205160303495.png)

![image-20221205160354619](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205160354619.png)

![image-20221205161511499](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205161511499.png)

![image-20221205163447691](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205163447691.png)

# 第二章 物理层

主要考虑的是怎样才能把连接各种传输媒体上传输比特流

![image-20221205164750622](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205164750622.png)

多模光纤和单模光纤

![image-20221205165600523](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205165600523.png)

![image-20221205170506962](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205170506962.png)

![image-20221205170631736](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205170631736.png)

### 编码与调制

![image-20221205171150230](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205171150230.png)

![image-20221205171413892](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205171413892.png)

### 曼彻斯特编码

![image-20221205171618315](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205171618315.png)

![image-20221205171800910](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205171800910.png)

### 调制

![image-20221205171850634](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205171850634.png)

![image-20221205172006150](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205172006150.png)

### 信道的极限容量

![image-20221205172415599](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205172415599.png)

### 香农公式

![image-20221205172518263](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205172518263.png)

![image-20221205172755992](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221205172755992.png)

### 课后习题

2-01 物理层要解决什么问题物理层的主要特点是什么

物理层要解决的主要问题：

1、完成本层的协议与服务并使上层的数据链路层感觉不到这些差异的存在

2、解决物理连接的建立、维持和释放问题

3、在两个相邻系统之间唯一地标识数据电路

物理层的主要特点：

与传输媒体接口的机械、电气、功能和规程特性

2-03 试给出数据通信系统的模型并说明其主要组成构件的作用。

源系统、传输系统、和目的系统

源系统：

源点：源点设备产生要传输的数据。例如正文输入到 PC 机产生输出的数字比特流。
       发送器：通常源点生成的数据要通过发送器编码后才能在传输系统中进行传输。

目的系统：

接收器：接收传输系统传送过来的信号并将其转换为能够被目的设备处理的信息。
          终点：终点设备从接收器获取传送过来的信息。



2-04 试解释以下名词：数据、信号、模拟数据、模拟信号、基带信号、带通信号、数字数据、数字信号、码元、单工通信、半双工通信、全双工通信、串行传输、并行传输。

数据：运送信息的实体

信号：数据的电气或电磁的表现

模拟数据：运送信息的模拟信号

模拟信号：连续变化的信号

基带信号：来自信源的信号

带通信号：经过载波调试的信号

数字信号：取值为有限的几个离散值的信号

数字数据：取值为不连续数值的数据

码元：在使用时间域的波形表示数字信号时，代表不同离散值的基本波形

单工通信：只有一个方向的通信而没有反方向的交互

半双工通信：通信和双方都可以发送信息，但不能双方同时发送

全双工通信：通信的双方可以同时发送和接收信息



2-05 物理层的接口有哪几个特性各包含什么内容       1、机械特性：指明接口所用的接线器的形状和尺寸、引线数目和排列、固定和锁定装置等等

2、电气特性：指名在接口电缆的各条线上出现的电压的范围

3、功能特性：指明某条电路上出现的某一电平的电压表示何意

4、规程特性：说明对于不同功能的各种可能时间的出现顺序



2-06 数据在信道中的传输速率受哪些因素的限制信噪比能否任意提高，香农公式在数据通信中的意义是什么，“比特/秒”和“码元/秒”有何区别

数据在信道中的传输速率受码元传输速率和信噪比的影响，信噪比不能任意提高、

香农公式的意义在于：只要信息传输速率低于信道的极限传输速率，就一定可以找到某种方法实现无差错传输

比特/秒指信息传输速率，每秒钟传输的信息量，玛元/秒是码元传输速率，每秒钟传送的码元个数



2-07 假定某信道受奈氏准则限制的最高码元速率为 2000 码元/秒。如果采用振幅调制把码元的振幅划分为 16 个不同等级来传送那么可以获得多高的数据率b/s

2000 x log2（16）=8000比特/秒



 2-10 常用的传输媒体有哪几种各有何特点

1.双绞线
         双绞线分屏蔽双绞线和无屏蔽双绞线。由两根相互绝缘的导线组成。可以传输模拟信号，也可以传输数字信号。一般用作电话线传输声音信号。

2.同轴电缆
          同轴电缆分基带同轴电缆和宽带同轴电缆。其结构是在一个包有绝缘的实心导线外再套上一层外面也有一层绝缘的空心圆形导线。由于其高带宽高达 300~400Hz、低误码率、性能价格比高所以用作 LAN 中

3.光导纤维

光导纤维以光纤维载体利用光的全反向原理传播光信号。光纤被广泛用于电信系统铺设主干线。

4.无线电微波通信

无线电微波通信分为地面微波接力通信和卫星通信

2-13 为什么要使用信道复用技术常用的信道复用技术有哪些

信道复用的目的是让不同的计算机连接到相同的信道上,以共享信道资源。在一条传输介质上传输多个信号,提高线路的利用率降低网络的成本。这种共享技术就是多路复用技术。

频分复用（FDM）：用于传输信道的总带宽划分成若干个子频带或称子信道每一个子信道传输 1 路信号。频分复用技术的特点是所有子信道传输的信号以并行的方式工作每一路信号传输时可不考虑传输时延，因而频分复用技术取得了非常广泛的应用。

时分复用（TDM）：将提供给整个信道传输信息
的时间划分成若干时间片，简称时隙，并将这些时隙分配给每一个信号源使用，每一路信号在自己的时隙内独占信道进行数据传输。。时分复用技术的特点是时隙事先规划分配好且固定不变，所以有时也叫同步时分复用。缺点是线路利用率低



2-14 试写出下列英文缩写的全文并进行简单的解释。
FDM、TDM、STDM、WDM、DWDM、CDMA

FDM(frequency division multiplexing)频分复用：同一时间同时发送多路信号。所有的用户可以在同样的时间占用不同的带宽资源。

TDM(Time Division Multiplexing)时分复用将一条物理信道按时间分成若干时间片，轮流地给多个用户使用，每一个时间片由复用的一个用户占用，所有用户在不同时间占用同样的频率宽度。

STDM(Statistic Time Division Multiplexing)统计时分复用：一种改进的时分复用。不像时分复用那样采取固定方式分配时隙，而是按需动态地分配时时隙。

WDM(Wave Division Multiplexing)波分复用：在光信道上采用的一种频分多路敷衍的变种，即光的频分复用。不同光纤上的光波信号常常是两种光波信号复用到一根长距离传输的光纤上的复用方式。

CDMA(Code Wave Division Multiplexing)码分多址：是采用扩频的码分多址技术。用户可以在同一时间、同一频段上根据不同的编码获得业务信道。



#第三章 数据链路层

![image-20221124103934186](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221124103934186.png)

![image-20221124103843032](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221124103843032.png)

#### 可靠传输的实现机制——停止—等待协议SW

#####超时重传

![image-20221124104416913](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221124104416913.png)

#####判断重复：

![image-20221124104725354](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221124104725354.png)

#####确认迟到

![image-20221124105047698](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221124105047698.png)

##### 注意事项：

![image-20221124111118099](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221124111118099.png)

#####自动重传协议ABQ：Automatic Repeat reQuest

![image-20221124111001331](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221124111001331.png)

![image-20221129090501426](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129090501426.png)

![image-20221129091108367](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129091108367.png)

### 点对点协议：ppp

![image-20221129091821117](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129091821117.png)

字节填充法

![image-20221129093203870](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129093203870.png)

比特填充法

![image-20221129093259674](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129093259674.png)

ppp协议工作状态

![image-20221129093927088](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129093927088.png)

![image-20221129094309502](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129094309502.png)

随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对点链路和链路层交换机的交换式局域网在有线领域已完全取代了共享式局域网，但由于无线信道的广播天性，无线局域网仍然使用的是共享媒体技术

### 信道复用技术

![image-20221129100106510](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129100106510.png)

#### 频分复用FDM

![image-20221129100517247](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129100517247.png)

#### 时分复用TDM

![image-20221129100555418](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129100555418.png)

#### 波分复用WDM

![image-20221129100713644](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129100713644.png)

#### 码分复用CDM

![image-20221129100917615](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129100917615.png)

![image-20221129101036841](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129101036841.png)

![image-20221129101320982](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129101320982.png)

![image-20221129101904505](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129101904505.png)

![image-20221129102453994](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129102453994.png)

![image-20221129100813740](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129100813740.png)

 

### 媒体接入控制

###CSMA/CD载波监听多址接入/碰撞检测

![image-20221129104217744](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129104217744.png)

![](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129104410957.png)

碰撞窗口

![image-20221129105233583](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129105233583.png)

![image-20221129105549947](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129105549947.png)

![image-20221129105707151](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129105707151.png)

![image-20221129105902525](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129105902525.png)

极限信道利用率：

![image-20221129110257790](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129110257790.png)

![image-20221129111311317](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129111311317.png)

![image-20221129111424804](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129111424804.png)

  ![image-20221129111738389](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129111738389.png)

![image-20221129111916972](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129111916972.png)

![image-20221129112156869](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129112156869.png)

![image-20221129112508718](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129112508718.png)

![image-20221129112630649](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129112630649.png)

![image-20221129112808602](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129112808602.png)

### MAC地址、IP地址以及ARP协议

![image-20221129113009899](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129113009899.png)

  ![image-20221129113240875](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129113240875.png)

  ![image-20221129114016457](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129114016457.png)

![image-20221129114144668](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129114144668.png)

![image-20221129114616412](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129114616412.png)

###以太网的MAC帧格式

![image-20221211105628000](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211105628000.png)

![image-20221211105737835](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211105737835.png)

![image-20221211105856657](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211105856657.png)



####多播地址

![image-20221129114943645](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129114943645.png)

数据包转发过程

![image-20221129120516699](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129120516699.png)

ARP协议

![image-20221129120758055](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129120758055.png)

主机C将B的ip地址与mac地址记录到自己的ARP高速缓存表中

![image-20221129120914974](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129120914974.png)

![image-20221129121031784](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129121031784.png)

###集线器在物理层扩展共享以太网

集线器连接后最大吞吐量不变，集线器工作在物理层且碰撞域不隔离

![image-20221211100641525](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211100641525.png)

![image-20221211100445723](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211100445723.png)

![image-20221211101221360](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211101221360.png)

### 网桥在数据链路层扩展以太网

![image-20221211101507095](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211101507095.png)

![image-20221211101833985](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211101833985.png)

![image-20221211101855556](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211101855556.png)



####透明网桥的自学习和转发帧流程 ![image-20221211102304349](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211102304349.png)

#### 透明网桥的STP协议

![image-20221211102613881](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211102613881.png)

![image-20221211102723313](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211102723313.png)

###工作在数据链路层的交换机

![image-20221211103114364](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211103114364.png)

![image-20221211103301691](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211103301691.png)

####交换机自学习和转发帧流程

![image-20221211103454004](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211103454004.png)

![image-20221211103715421](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211103715421.png)

![image-20221129160136441](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129160136441.png)

![image-20221211103950050](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211103950050.png)

![image-20221211104157616](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211104157616.png)

#### 共享式以太网和交换式以太网对比

![image-20221211104735349](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211104735349.png)

![image-20221211104750414](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211104750414.png)

####生成树协议STP

![image-20221129160939287](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129160939287.png)

![image-20221129161155448](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129161155448.png)

### VLAN虚拟局域网概述

![image-20221129161345770](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129161345770.png)

![image-20221129161553284](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129161553284.png)

![image-20221129161705236](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129161705236.png)

![image-20221129162003120](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129162003120.png)

 ![image-20221129162651929](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129162651929.png)

![image-20221129163141287](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129163141287.png)

  ![image-20221129163835605](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129163835605.png)

![image-20221129164003283](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129164003283.png)

Hybrid端口

![image-20221129164642580](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129164642580.png)

### 千兆以太网（吉比特以太网）

![image-20221211121947008](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211121947008.png)

![image-20221211122047152](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211122047152.png)

![image-20221211122111812](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211122111812.png)

![image-20221211122142505](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211122142505.png)

### 无线局域网（Wireless Local Area Network）

![image-20221211122312456](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211122312456.png)



![image-20221211122624842](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211122624842.png)

![image-20221211122720368](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211122720368.png)

#### 无线局域网的物理层

![image-20221211122838622](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211122838622.png)

![image-20221211123020659](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123020659.png)

![image-20221211123117474](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123117474.png)

#### CSMA/CA协议

![image-20221211123242509](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123242509.png)

![image-20221211123409968](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123409968.png)

![image-20221211123607974](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123607974.png)

![image-20221211123642842](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123642842.png)

![image-20221211123659776](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123659776.png)

####执行退避算法

![image-20221211123736127](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123736127.png)

![image-20221211123813904](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123813904.png)

![image-20221211123857734](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211123857734.png)

![image-20221211124131576](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211124131576.png)

![image-20221211124746147](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211124746147.png)

![image-20221211124233360](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211124233360.png)

![image-20221211124241706](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211124241706.png)

![image-20221211124809900](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211124809900.png)

![image-20221211124310895](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211124310895.png)

![image-20221211124324268](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211124324268.png)

#### 无线局域网MAC帧

![image-20221211125002139](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125002139.png)

![image-20221211125235767](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125235767.png)

![image-20221211125303512](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125303512.png)

持续期

![image-20221211125347386](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125347386.png)

序号控制

![image-20221211125408324](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125408324.png)

地址字段

![image-20221211125418566](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125418566.png)

![image-20221211125428424](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125428424.png)

![image-20221211125529631](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125529631.png)

![image-20221211125607278](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125607278.png)

![image-20221211125630650](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211125630650.png)

###课后习题

3-­01 数据链路即逻辑链路与链路即物理链路有何区别？“电路接通了”与“数据链路接通了”的区别何在？

数据链路与链路的区别在于数据链路除链路外还必须有一些必要的协议来控制数据的传输。因此数据链路比链路多了实现通信协议所需要的硬件和软件。



3-02、数据链路层中的链路控制包括哪些功能？试讨论数据链路层做成可靠的链路层有哪些优点和缺点。

链路管理帧同步流量控制差错控制将数据和控制信息分开透明传输寻址。

所谓“可靠传输”就是：数据链路层的发送端发送什么在接收端就收到什么。这就是收到的帧并没有出现比特差错但却出现了帧丢失、帧重复或帧失序。以上三种情况都属于“出现传输差错”但都不是这些帧里有“比特差错”。

“无比特差错”与“无传输差错”并不是同样的概念。在数据链路层使用 CRC 检验能够实现无比特差错的传输但这不是可靠的传输。



3-03、网络适配器的作用是什么网络适配器工作在哪一层

网络适配器能够对数据的串行和并行传输进行转换,并且能够对缓存数据进行出来,实现以太网协议,同时能够实现帧的传送和接受,对帧进行封闭等.网络适配器工作在物理层和数据链路层。



3-04、数据链路层的三个基本问题帧定界、透明传输和差错检测为什么都必须加以解决

 帧定界使收方能从收到的比特流中准确地区分出一个帧的开始和结束在什么地方

透明传输使得不管所传数据是什么样的比特组合，都应当能够在链路上传送

差错控制主要包括差错检测和差错纠正，旨在降低传输的比特差错率



3-06、PPP 协议的主要特点是什么为什么 PPP 不使用帧的编号PPP 适用于什么情况为什么 PPP 协议不能使数据链路层实现可靠传输

1、点对点协议既支持异步链路也支持同步链路。

2、PPP 是面向字节的。

PPP 不采用序号和确认机制是出于以下的考虑：

数据链路层的可靠传输并不能保证网络层的传
输也是可靠的。

PPP 协议在帧格式中有帧检验序列 FCS 安段。对每一个收到的帧PPP 都要使用硬件进行CRC 检验。若发现有差错则丢弃该帧一定不能把有差错的帧交付给上一层。端到端的差错检测最后由高层协议负责。因此PPP 协议可保证无差错接受。

PPP 协议适用于用户使用拨号电话线接入因特网的情况。

PPP 协议不能使数据链路层实现可靠传输的原因:

PPP 有 FCS 来确保数据帧的正确性。如果错误则上报错误信息来确保传输的可靠性。当然它和其他 L2 协议一样没有 TCP 的 ACK 机制，这也是传输层以下协议所没有的特性，以便于提高网络的性能。



3-12PPP 协议的工作状态有哪几种，当用户要使用 PPP 协议和 ISP 建立连接进行通信需要建立哪几种连接，每一种连接解决什么问题

PPP 协议的工作状态分为：“链路终止”状态，“链路静止”状态，“链路建立”状态，“鉴别”状态，“网络层协议”状态“，链路打开”状态。

用户要使用 PPP 协议和 ISP 建立连接进行通信需要建立的连接为：链路静止，链路建立，鉴别，网络层协议链路打开。

链路静止时在用户 PC 机和 ISP 的路由器之间并不存在物理层的连接。链路建立时目的是建立链路层的 LCP 连接。
        鉴别时只允许传送 LCP 协议的分组、鉴别协议的分组以及监测链路质量的分组。

网络层协议时PPP 链路的两端的网络控制协议 NCP 根据网络层的不同协议无线交换网络层特定的网
络控制分组。

链路打开时链路的两个 PPP 端点可以彼此向对方发送分组。



3-13  局域网的主要特点是什么为什么局域网采用的广播通信通信方式而广域网不采用呢

从功能的角度来看局域网具有以下几个特点；

共享传输信道。在局域网中多个系统连接到一个共享的通信媒体上；

1.地理范围有限用户个数有限。

2.传输速率高。

3.误码率低

4.多采用分布式控制和广播式通信。

从网络的体系结构和传输控制规程来看局域网也有自己的特点：

 底层协议简单

不单独设立网络层

采用多种媒体访问控制技术

局域网采用广播通信是因为局域网中的机器都连接到同一条物理线路，所有主机的数据传输都经过这条链路，采用的通信方式是将主机要发送的数据送到公用链路上发送至所有的主机。接收端通过地址对比，接收发往自己的数据并丢弃其他数据的方式。



3-15  什么叫做传统以太网以太网有哪两个主要标准

以太网是当今现有局域网采用的最通用的通信协议标准，组建于七十年代早期。Ethernet(以太网）是一种传输速率为 10Mbps 的常用局域网LAN标准。在以太网中所有计算机被连接一条同轴电缆上，采用具有冲突检测的载波感应多处访问CSMA/CD方法，采用竞争机制和总线拓朴结构。基本上，以太网由共享传输媒体如双绞线电缆或同轴电缆和多端口集线器、网桥或交换机构成。在星型或总线型配置结构中，集线器/交换机/网桥通过电缆使得计算机、打印机和工作站彼此之间相互连接。
         有 DIX Ethernet V2 标准和 802.3 标准。



3-16  数据率为 10Mb/s 的以太网在物理媒体上的码元传输速率是多少码元/秒

码元传输速率即为波特率。以太网使用曼彻斯特编码这就意味着发送的每一位都有两个信号周期。标准以太网的数据速率是 10Mb/s，因此波特率是数据率的两倍即 20M 波特。



3-18  试说明 10BASE-T 中的“10”、“BASE”和“T”所代表的意思。

10BASE-T\\“10”表示数据率为 10Mb/s，“BASE”表示电缆上的信号是基带信号，“T”表示使用双绞线的最大长度是 500m。



3-19  以太网使用的 CSMA/CD 协议是以争用方式接入到共享信道。这与传统的时分复用TDM 相比优缺点如何

CSMA/CD 是一种动态的媒体随机接入共享信道方式，而传统的时分复用 TDM 是一种静态的划分信道方式，所以对信道的利用，CSMA/CD 是用户共享信道更灵活，可提高信道的利用率。

不像 TDM为用户按时隙固定分配信道，即使当用户没有数据要传送时，信道在用户时隙也是浪费的，也因为 CSMA/CD 是用户共享信道所以当同时有用户需要使用信道时会发生碰撞，就降低信道的利用率。而 TDM 中用户在分配的时隙中不会与别的用户发生冲突。对局域网来说连入信道的是相距较近的用户，因此通常信道带宽较宽，如果使用 TDM 方式用户在自己的时隙内没有数据发送的情况会更多，不利于信道的充分利用。

对计算机通信来说突发式的数据更不利于使用 TDM 方式。



3-20  假定 1km 长的 CSMA/CD 网络的数据率为 1Gb/s。设信号在网络上的传播速率为200000km/s。求能够使用此协议的最短帧长。

对于 1km 电缆单程传播时间为 1÷200000=5×10-6s即 5us来回路程传播时间为10us。为了能够按照 CSMA/CD 工作最短帧的发射时间不能小于 10us。以 1Gb/s 速率工作10us 可以发送的比特数等于：

10的9次方x10的-5次方=10000比特

即最短帧长为10000bt或1250字节长



==3-21==  什么叫做比特时间使用这种时间单位有什么好处100 比特时间是多少微秒

比特时间是指传输 1bit 所需要的时间。这种时间位与数据率密切相关，用它来计量时延可以将时间与数据量联系起来。

==？？？==“比特时间”换算成“微秒”必须先知道数据率是多少。如数据率是 100Mb/s则 100 比特时间等于 10us。



==3-24== 假定站点 A 和 B 在同一个 10Mb/s 以太网网段上。这两个站点之间的时延为 225 比特时间。现假定 A 开始发送一帧并且在 A 发送结束之前 B 也发送一帧。如果 A 发送的是以太网所容许的最短的帧，那么 A 在检测到和 B 发生碰撞之前能否把自己的数据发送完毕，换言之如果 A 在发送完毕之前并没有检测到碰撞，那么能否肯定 A 所发送到帧不会和 B发送的帧发生碰撞。

提示：在计算时应当考虑到每一个以太网帧在发送到信道上时在MAC 帧前面还要增加若干字节的前同步码和帧定界符

答：设在 t=0 时 A 开始发送。在 t=576 比特时间A 应当发送完毕。t=225 比特时间B 就检测出 A 的信号。只要 B 在 t=224 比特时间之前发送，数据A 在发送完毕之前就一定检测到碰撞。就能够肯定以后也不会再发送碰撞了。

如果 A 在发送完毕之前并没有检测到碰撞，那么就能够肯定 A 所发送到帧不会和 B 发送的帧发生碰撞，当然也不会和其他的站点发送碰撞。



==3-25== 在上题中的站点 A 和 B 在 t=0 时同时发送了数据帧。当 t=255 比特时间A 和 B 同时检测到发送了碰撞并且在t=225+48=273比特时间完成了干扰信号的传输。A和B在CSMA/CD算法中选择不同的 r 值退避。假定 A 和 B 选择的随机数分别是 rA=0 和 rB=1.。试问 A 和 B各在什么时间开始重传其数据帧？A重传的数据帧在什么时间到达B?A重传的数据会不会和B 重传的数据再次发送碰撞？B 会不会在预定的重传时间停止发送数据

t=0 时A 和 B 开始发送数据。

t=255 比特时间A 和 B 都检测到碰撞。

t=273 比特时间A 和 B 结束干扰信号的传输。

t=594 比特时间A 开始发送

t=785 比特时间B 再次检测信道。如空闲则 B 在 881 比特时间发送数据。否则再退避。

A 重传的数据在 819 比特时间到达 B,B 先检测到信道忙，因此 B 在预定的 881 比特时间停止发送数据。



3-30 以太网交换机有何特点它与集线器有何区别        

 以太网交换机实质上是一个多端口网桥。工作在数据链路层。以太网交换机的每个端口都直接与一个单个主机或另一个集线器相连，并且一般工作在全双工方式。交换机能同时连通许多对的端口，使每一对相互通信的主机都能像独占通信媒体一样进行无碰撞地传输数据。通信完成后就断开连接。

区别：以太网交换机工作数据链路层，集线器工作在物理层。集线器只对端口上进来的比特流进行复制转发不能支持多端口的并发连接。



3-31 网桥的工作原理和特点是什么网桥与转发器以及以太网交换机有何异同

网桥的每个端口与一个网段相连，网桥从端口接收网段上传送的各种帧。每当收到一个帧时就先暂存在其缓冲中。若此帧未出现差错且欲发往的目的站 MAC 地址属于另一网段，则通过查找站表将收到的帧送往对应的端口转发出去。若该帧出现差错则丢弃此帧。

网桥过滤了通信量，扩大了物理范围，提高了可靠性，可互连不同物理层、不同 MAC 子层和不同速率的局域网。但同时也增加了时延。对用户太多和通信量太大的局域网不适合。

网桥与转发器不同：

1、网桥工作在数据链路层而转发器工作在物理层

2、网桥不像转发器转发所有的帧，而是只转发未出现差错，且目的站属于另一网络的帧或广播帧

3、转发器转发一帧时不用检测传输媒体，而网桥在转发一帧前必须执行 CSMA/CD 算法

4、网桥和转发器都有扩展局域网的作用。但网桥还能提高局域网的效率，并连接不同 MAC 子层和不同速率局域网的作用。

以太网交换机通常有十几个端口，而网桥一般只有 2-4 个端口，它们都工作在数据链路层。网桥的端口一般连接到局域网，而以太网的每个接口都直接与主机相连。交换机允许多对计算机间能同时通信，而网桥允许每个网段上的计算机同时通信。

所以实质上以太网交换机是一个多端口的网桥，连到交换机上的每台计算机就像连到网桥的一个局域网段上。

网桥采用存储转发方式进行转发，而以太网交换机还可采用直通方式转发。以太网交换机采用了专用
的交换机构芯片，转发速度比网桥快。



3-33 网桥中的转发是用自学习算法建立的。如果有的站点总是不发送数据而仅仅接收数据，那么在转发表中是否就没有与这样的站点相对应的项目，如果要向这个站点发送数据帧，那么网桥能够把数据帧正确转发到目的地址吗

答：如果站点仅仅接受数据那么在转发表中就没有这样的项目。网桥能把数据帧正确的发送到目的地址。如果不知道目的地地址的位置，源机器就发布广播帧询问它在哪里。

每个网桥都转发该查找帧(discovery frame)，这样该帧就可到达互联网中的每一个 LAN。当答复回来时途经的网桥将它们自己的标识记录在答复帧中，于是广播帧的发送者就可以得到确切的路由并可从中选取最佳路由。

# 第四章 网络层概述

![image-20221129172706009](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129172706009.png)

![image-20221129172802697](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129172802697.png)

![image-20221129173022579](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129173022579.png)

![image-20221129173135401](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129173135401.png)

![image-20221129173206489](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129173206489.png)

### IPv4地址概述

![image-20221129173544082](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129173544082.png)

### 分类编址

![image-20221129175713064](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129175713064.png)

####A类网络

![image-20221129180033047](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129180033047.png)

#### B类网络

![image-20221129180232580](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129180232580.png)

#### C类网络

![image-20221129180437438](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129180437438.png)

![image-20221129180734805](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129180734805.png)

  

![image-20221129181036371](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129181036371.png)

![image-20221129181703767](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129181703767.png)

#### 划分子网的IPv4地址

![image-20221129182836053](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129182836053.png)

 ![image-20221129183017991](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129183017991.png)

![image-20221129183314332](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129183314332.png)



![image-20221129183917532](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129183917532.png)

 

![image-20221129184040726](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129184040726.png)

![image-20221129184223160](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129184223160.png)

#### 无分类编址的IPv4地址

![image-20221129184605408](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129184605408.png)

![image-20221129184833717](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129184833717.png)

![image-20221129185351784](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129185351784.png)

![image-20221129185651220](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129185651220.png)

![image-20221129190032295](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129190032295.png)

![image-20221129190445194](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129190445194.png)

定长子网掩码flsm

![image-20221129191224056](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129191224056.png)

变长子网掩码vlsm

![image-20221129191450125](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129191450125.png)

![image-20221129191850854](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129191850854.png)

![image-20221129192034229](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129192034229.png)

#### ip数据报的发送和转发过程

![image-20221129192423402](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129192423402.png)



![image-20221129192658686](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129192658686.png)

 

![image-20221129192812593](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129192812593.png)

==目的网络是IP地址与子网掩码进行与计算==

![image-20221129193140547](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129193140547.png)

![image-20221129193436008](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129193436008.png)

![image-20221129193538746](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129193538746.png)

![image-20221129193717330](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221129193717330.png)

子网掩码针对与本网络的各主机，默认网关是给路由器看的

### 静态路由配置及其可能产生的路由环路问题

路由器的最长前缀匹配原则，如果路由表中记录的网络相同，那么会转发到拥有最长前缀的网络中去

![image-20221130141139645](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130141139645.png)

![image-20221130141708707](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130141708707.png)

将特定主机路由的ip地址抽象成网络地址，子网掩码为255.255.255.255所以为192.168.2.1/32

![image-20221130195455047](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130195455047.png)

![image-20221130195733082](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130195733082.png)

黑洞路由：

![image-20221130200058287](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130200058287.png)

![image-20221130200128674](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130200128674.png)

![image-20221130200404030](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130200404030.png)

![image-20221130200416321](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130200416321.png)

## 路由选择协议概述

因特网所采用的路由选择协议的主要特点

自适应：动态路由选择，能较好的适应网络状态的变化

分布式：路由器之间交换路由信息

分层次：将整个因特网划分为许多较小的自治系统AS

![image-20221201140532735](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201140532735.png)

![image-20221130201500763](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130201500763.png)

![image-20221130202832936](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221130202832936.png)

## 路由协议RIP的基本工作原理

![image-20221201140821900](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201140821900.png)

等价负载均衡指将信息量均匀地分布在每条链路上

![image-20221201141118668](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201141118668.png)

![image-20221201141419135](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201141419135.png)

![image-20221201144012301](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201144012301.png)

![image-20221201144206434](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201144206434.png)

![image-20221201144536060](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201144536060.png)



![image-20221201145005006](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201145005006.png)摄像头没有网络可以远程监控吗

## OSPF协议

![image-20221201145217405](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201145217405.png)

![image-20221201145326522](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201145326522.png)

![image-20221201145517846](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201145517846.png)

 ![image-20221201151412178](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201151412178.png)

![image-20221201151446983](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201151446983.png)

![image-20221201151549143](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201151549143.png)

![image-20221201151714520](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201151714520.png)

![image-20221201151850033](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201151850033.png)

![image-20221201152027819](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201152027819.png)

![image-20221201154432208](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201154432208.png)

## BGP

![image-20221201154623131](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201154623131.png)

![image-20221201154845225](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201154845225.png)

![image-20221201154957802](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201154957802.png)

 ![image-20221201155128765](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201155128765.png)

![image-20221201155218561](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201155218561.png)

![image-20221201155342805](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201155342805.png)

 

![image-20221201155432436](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201155432436.png)

## IPv4数据报首部格式

![image-20221201155936793](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201155936793.png)

![image-20221201160208469](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201160208469.png)

![image-20221201160314097](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201160314097.png)

![image-20221201160417587](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201160417587.png)

![image-20221201161153531](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201161153531.png)

   ![image-20221201161332366](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201161332366.png)

![image-20221201161832962](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201161832962.png)

![image-20221201161857257](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201161857257.png)

![image-20221201162207979](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201162207979.png)

![image-20221201162245337](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201162245337.png)

![image-20221201162536515](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201162536515.png)

![image-20221201162613422](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201162613422.png)

![image-20221201162641812](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201162641812.png)

##IP多播

![image-20221211170357852](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211170357852.png)

![image-20221211170651001](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211170651001.png)

![image-20221211170748762](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211170748762.png)

![image-20221211204040263](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211204040263.png)









## 网际控制报文ICMP协议

![image-20221201163838486](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201163838486.png)

![image-20221201163919201](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201163919201.png)

![image-20221201164103494](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201164103494.png)

![image-20221201164149347](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201164149347.png)

 ![image-20221201164311110](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201164311110.png)

![image-20221201164506241](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201164506241.png)

![image-20221201164609297](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201164609297.png)

![image-20221201164708083](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201164708083.png)

![image-20221201164748509](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201164748509.png)

![image-20221201165247847](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201165247847.png)

![image-20221201165308703](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201165308703.png)

## 虚拟专用网网VPN与网络地址转换NAT

![image-20221201165553071](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201165553071.png)

![image-20221201165743641](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201165743641.png)

![image-20221201165859184](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201165859184.png)

![image-20221201170030047](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201170030047.png)

 

![image-20221201170247888](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201170247888.png)

![image-20221201170258002](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201170258002.png)



![image-20221201170319241](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201170319241.png)

 

![image-20221201170554411](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201170554411.png)

![image-20221201170718876](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221201170718876.png)

## 课后习题

4-01 网络层向上提供的服务有哪两种试比较其优缺点。

答案：虚电路服务和数据报服务。

虚电路的优点：虚电路服务是面向连接的网络能够保证分组总是按照发送顺序到达目的站且不丢失、不重复提供可靠的端到端数据传输目的站地址仅在连接建立阶段使用每个分组使用短的虚电路号使分组的控制信息部分的比特数减少减少了额外开销端到端的差错处理和流量控制可以由分组交换网负责也可以由用户机负责。

虚电路的缺点:虚电路服务必须建立连接属于同一条虚电路的分组总是按照同一路由进行转发当结点发生故障时所有通过出故障的结点的虚电路均不能工作。

数据报的优点:数据报服务不需要建立连接每个分组独立选择路由进行转发当某个结点发生故障时后续的分组可以另选路由因而提高了通信的可靠性。数据报服务的灵活性好适用于传输可靠性要求不高、通信子网负载不均衡、需要选择最佳路径的场合。

数据报的缺点:数据报服务是面向无连接的。到达目的站时不一定按发送顺序传输中的分组可能丢失和重复提供面向无连接的、不可靠的数据传输每个分组都要有目的站的全地址当网络发生故障是出故障的结点可能会丢失数据，一些路由可能会发生变化，端到端的差错处理和流量控制只由主机负责。



4-03 作为中间系统转发器、网桥、路由器和网关都有何区别

1转发器、网桥、路由器、和网关所在的层次不同。

物理层、数据链路层、网络层、网络层以上

2当中继系统是转发器或网桥时一般并不称之为网络互连因为仍然是一个网络。

路由器其实是一台专用计算机用来在互连网中进行路由选择。一般讨论的互连网都是指用路由器进行互连的互连网络。



4-04 试简单说明 IP、ARP、RARP 和 ICMP 协议的作用。

IP:网际协议它是 TCP/IP 体系中两个最重要的协议之一，IP 使互连起来的许多计算机网络能够进行通信。无连接的数据报传输. 数据报路由。

ARP地址解析协议实现地址转换：将 IP 地址转换成物理地址。

RARP逆向地址解析协议 ：将物理地址转换成 IP 地址。

ICMP:Internet 控制消息协议，进行差错控制和传输控制，减少分组的丢失。



4-05 IP 地址分为几类各如何表示 IP 地址的主要特点是什么

![image-20221211205030347](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211205030347.png)

| 网络类型 | 第一个可指派的网络号 | 最后一个可指派的网络号 | 每个网络的最大主机数 | 最大可指派的网络数 |
| -------- | -------------------- | ---------------------- | -------------------- | ------------------ |
| A        | 1                    | 126                    | 2^24 -2              | 2^7 -2             |
| B        | 128.1                | 191.255                | 2^16-2               | 2^14 -1            |
| C        | 192.0.1              | 223.255.255            | 2^8 - 2              | 2^21 -1            |

127被被用作本地软件回送测试



4-091子网掩码为 255.255.255.0 代表什么意思

1可以代表 C 类地址对应的子网掩码默认值也能表示 A 类和 B 类地址的掩码,前 24 位决定网络号和子网号后 8 位决定主机号。用 24bit 表示网络部分地址，包括网络号和子网号

2一网络的现在掩码为 255.255.255.248问该网络能够连接多少个主机

2255.255.255.248 化成二进制序列为：11111111 11111111 11111111 11111000根据掩码的定义后三位是主机号一共可以表示 8 个主机号，除掉全 0 和全 1 的两个，该网络能够接 6 个主机。

3一 A 类网络和一 B 类网络的子网号 subnet-id 分别为 16 个 1 和 8 个 1，问这两个网络的子网掩码有何不同

子网掩码的形式是一样的都是 255.255.255.0但是子网的数目不一样，前者为 65534，后者为 254。



4-11 IP 数据报中的首部检验和并不检验数据报中的数据。这样做的最大好处是什么坏处是什么

好处是数据报每经过一个结点，结点只检查首部的检验和使结点工作量，降低网络速度加快。

坏处是只检验首部，不包括数据部分，即使数据出错也无法得知，只有到目的主机才能发现。



4-12 当某个路由器发现一 IP 数据报的检验和有差错时为什么采取丢弃的办法，而不是要求源站重传此数据报，计算首部检验和为什么不采用 CRC 检验码

之所以不要求源站重发是因为地址子段也有可能出错从而找不到正确的源站。  

数据报每经过一个结点结点处理机就要计算一下校验和。不用 CRC就是为了简化计算。



4-15.什么是最大传送单元 MTU？它和 IP 数据报的首部中的哪个字段有关系

IP 层下面数据链里层所限定的帧格式中，数据字段的最大长度与 IP 数据报首部中的总长度字段有关系



4-38 IGP 和 EGP 这两类协议的主要区别是什么

IGP：内部网关协议，只关心本自治系统内如何传送数据报，与互联网中其他自治系统使用说明协议无关。

EGP：外部网关协议，在不同的 AS 边界传递路由信息的协议，不关心 AS 内部使用何种协议。



4-39 试简述 RIP、OSPF 和 BGP 路由选择协议的主要特点。

| 主要特点     | RIP                                                        | OSPF                                                         | BGP              |
| ------------ | ---------------------------------------------------------- | ------------------------------------------------------------ | ---------------- |
| 网关协议     | 内部                                                       | 内部                                                         | 外部             |
| 路由表内容   | 目的网，下一站，距离                                       | 目的网，下一站，距离                                         | 目的网，完美路由 |
| 最优通路依据 | 跳数                                                       | 费用                                                         | 多种策略         |
| 算法         | 距离矢量                                                   | 链路状态                                                     | 距离矢量         |
| 传递方式     | 运输层UDP                                                  | IP数据报                                                     | TCP              |
| 其他         | 简单；效率低；跳数为12，不可达；好消息传的快，坏消息传的慢 | 效率高；路由器频繁交换信息；难保持一致性；规模大，统一度量，可达性 |                  |

4-40 RIP 使用 UDP,OSPF 使用 IP，而 BGP 使用 TCP。这样做有何优点为什么 RIP 周期性地和临站交换路由信息而 BGP 却不这样做

RIP 协议处于 UDP 协议的上层，RIP 所接收的路由信息都封装在 UDP 的数据报中，OSPF 的位置位于网络层，由于要交换的信息量较大，故应使报文的长度尽量短故采用 IP。BGP 要在不同的自治系统之间交换路由信息，由于网络环境复杂，需要保证可靠的传输所以选择 TCP。



4-43 IGMP 协议的要点是什么隧道技术是怎样使用的

答案：要点有：

1、IGMP 是用来进行多播的，采用多播协议可以明显地减轻网络中的各种资源的消耗，IP 多播实际上只要硬件多播的一种抽象

2、IGMP 只有两种分组即询问分组和响应分组。IGMP 使用 IP 数据报传递其报文，但它也向 IP 提供服务

3、IGMP 属于整个网际协议 IP 的一个组成部分，IGMP 也是 TCP/IP 的一个标准。

隧道技术使用：当多播数据报在传输过程中，若遇到不运行多播路由器的网络路由器，就对多播数据报进行再次封装，即加上一个普通数据报的首部，使之成为一个向单一目的站发送的单播数据报，通过了隧道以后再由路由器剥去其首部，使它又恢复成原来的多播数据报，继续向多个目的站转发



什么是 VPNVPN 有什么特点和优缺点VPN 有几种类别

Vpn指的是虚拟专用网络(Virtual private network,简称Vpn)指的是在公用网络上建立专用网络的技术。Vpn 属于远程访问技术,简单地说就是利用公网链路架设私有网络。Vpn主要采用了隧道技术、加解密技术、密钥管理技术和使用者与设备身份认证技术。

VPN的特点:降低成本、容易扩张、可完全控制主动权、资料安全保密与可靠的传输。

优点：

1)VPN能够让移动员工、远程员工、商务合作伙伴和其他人利用本地可用的高速宽带网连接（如DSL、有线电视或者WiFi网络）连接到企业网络。此外，高速宽带网连接提供一种成本效率高的连接远程办公室的方法。

缺点：



企业不能直接控制基于互联网的VPN的可靠性和性能。机构必须依靠提供VPN的互联网服务提供商保证服务的运行。这个因素使企业与互联网服务提供商签署一个服务级协议非常重要，要签署一个保证各种性能指标的协议。

VPN分为内联网VPN、外联网VPN和远程接入VPN.



什么是 NAT?NAPT 有哪些特点NAT 的优点和缺点有哪些NAT 的优点和缺点有哪些

NAT全称Network Address Translation即网络地址转换。 NAPT全称Network Address and Port Translation即网络地址与端口号转换

其特点是：

 (1)在路由器转发IP数据报时NAPT对IP地址和端口号都进行转换，转换过程如下：对于出专用网的数据，把专用网内不同的源IP地址转换为同样的全球IP地址，把源主机端口号转换为不同的新的端口号；对于入专用网的应答NAPT，根据不同的目的端口号从NAPT转换表中找到正确的目的主机。

(2)NAPT工作在网络层和传输层。 

NAT优点：(1)通过NAT专用网内部主机可使用专用地址与因特网上的主机通信。

(2)通过NAT一个全球合法IP地址可被多台专用网内部主机分享使用节省全球IP地址资源。

 NAT缺点：通信必须由专用网内的主机发起专用网内部的主机不能充当服务器。

## IGMP

![image-20221212153526628](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212153526628.png)

![image-20221212153619628](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212153619628.png)

![image-20221212153741434](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212153741434.png)

![image-20221212153905656](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212153905656.png)

![image-20221212154337629](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212154337629.png)

![image-20221212154527364](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212154527364.png)

![image-20221212154838435](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212154838435.png)

![image-20221212154932585](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212154932585.png)



![image-20221212155226249](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212155226249.png) 

![image-20221212155513527](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212155513527.png)

![image-20221212155808034](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212155808034.png)

![image-20221212155942960](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212155942960.png)

## 移动IP技术

![image-20221212160507242](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212160507242.png)

![image-20221212160617150](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212160617150.png)

## IPv6

![image-20221212161418194](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212161418194.png)

![image-20221212161657030](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221212161657030.png)

# 第五章 运输层

##概述

![](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210093027496.png)

## 运输层端口号、复用和分用的概念

 发送方复用，接收方分用![image-20221210093826450](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210093826450.png)

![image-20221210094005266](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210094005266.png)

UDP数据报给DNS服务器发送

![image-20221210094752740](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210094752740.png)

TCP报文段建立HTTP连接

![image-20221210095015530](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210095015530.png)

UDP和TCP的比较

![image-20221210095302990](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210095302990.png)

![image-20221210095705170](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210095705170.png)

![image-20221210100049590](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210100049590.png)

![image-20221210100738645](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210100738645.png)

##TCP的流量控制

![image-20221210101454510](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210101454510.png)

![image-20221210101708298](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210101708298.png)

![image-20221210102054244](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210102054244.png)

## TCP的拥塞控制

![image-20221210102514054](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210102514054.png)

![image-20221210102602896](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210102602896.png)

![image-20221210102756466](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210102756466.png)

###慢开始算法

![image-20221210103418875](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210103418875.png)

![image-20221210103551335](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210103551335.png)

### 快重传算法

![image-20221210103742387](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210103742387.png)

![image-20221210103915075](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210103915075.png)

### 快恢复算法

![image-20221210104111221](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210104111221.png)

  ![image-20221210104233122](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210104233122.png)

![image-20221210104613584](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210104613584.png)

###超时重传时间

![image-20221210131934479](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210131934479.png)

![image-20221210132252064](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210132252064.png)

![image-20221210132506559](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210132506559.png)

 ![image-20221210133233043](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210133233043.png)

## TCP可靠传输

![image-20221210144135485](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210144135485.png)

![image-20221210144239403](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210144239403.png)



###TCP三报文握手建立连接

![image-20221210144857580](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210144857580.png)

![image-20221210145826955](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210145826955.png)

![image-20221210163654355](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210163654355.png)

![image-20221210163933263](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210163933263.png)

### TCP四报文挥手释放连接

![image-20221210164513037](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210164513037.png)

![image-20221210164758220](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210164758220.png)

## 课后习题

 试说明运输层在协议栈中的地位和作用，运输层的通信和网络层的通信有什么重要区别，为什么运输层是必不可少的？

运输层处于面向通信部分的最高层，同时也是用户功能中的最低层，向它上面的应用层提供服务

运输层为应用进程之间提供端到端的逻辑通信，但网络层是为主机之间提供逻辑通信，面向主机承担路由功能即主机寻址及有效的分组交换。

各种应用进程之间通信需要“可靠或尽力而为”的两类服务质量，必须由运输层以复用和分用的形式加载到网络层。



5—08 为什么说 UDP 是面向报文的，而 TCP 是面向字节流的

发送方 UDP 对应用程序交下来的报文在添加首部后就向下交付 IP 层。UDP对应用层交下来的报文既不合并也不拆分，而是保留这些报文的边界。接收方 UDP 对 IP 层交上来的 UDP 用户数据报在去除首部后就原封不动地
交付上层的应用进程，一次交付一个完整的报文。

发送方 TCP 对应用程序交下来的报文数据块视为无结构的字节流



5—09 端口的作用是什么为什么端口要划分为三种

端口的作用是对 TCP/IP 体系的应用进程进行统一的标志，使运行不同操作系统的计算机的应用进程能够互相通信。

熟知端口，数值一般为 0~1023.标记常规的服务进程

登记端口号，数值为 1024~49151标记没有熟知端口号的非常规的服务进程

客户端使用的端口号（短暂端口号），仅在客户进程运行时短暂使用。



5—10 试说明运输层中伪首部的作用。

答\\用于计算运输层数据报校验和。



5—11 某个应用进程使用运输层的用户数据报 UDP，然而继续向下交给 IP 层后，又封装成 IP 数据报。既然都是数据报，可否跳过 UDP 而直接交给 IP 层？哪些功能 UDP提供了但 IP 没提提供

IP 数据报 IP 报承担主机寻址，提供报头检错；只能找到目的主机，而无法找到目的进程。

UDP提供对应用进程的复用和分用，以提供对数据差分的差错检验



==IP数据报重传时会有一个相应的标识符，只有标识符相同时才能组装成一个IP数据报==



5—13 一个 UDP 用户数据的数据字段为 8192 字节。在数据链路层要使用以太网来传送。试问应当划分为几个 IP数据报片说明每一个 IP数据报字段长度和片偏移字段的值。

六个ip数据报片

数据字段的长度：前 5 个是 1480 字节最后一个是 800 字节。
片偏移字段的值分别是0，1480，2960，4440，5920 和 7400.



5—14 一 UDP 用户数据报的首部十六进制表示是：06 32 00 45 00 1C E2 17.试求源端口、目的端口、用户数据报的总长度、数据部分长度。这个用户数据报是从客户发送给服务器还是发送给客户？使用 UDP 的这个服务器程序是什么

源端口号：1586

目的端口：69

数据报总长度：28

数据部分长度：20

从客户发给服务器（目的端口号<1023，是熟悉端口号），TFFTP



5—27 一个 TCP 报文段的数据部分最多为多少个字节为什么如果用户要传送的数据的字节长度超过 TCP 报文字段中的序号字段可能编出的最大序号，问还能否用TCP 来传送

65495 字节此数据部分加上 TCP 首部的 20 字节再加上 IP 首部的 20 字节，正好是 IP 数据报的最大长度 65535.当然若 IP 首部包含了选择，则 IP 首部长度超过 20 字节，这时 TCP 报文段的数据部分的长度将小于 65495 字节。

数据的字节长度超过 TCP 报文段中的序号字段可能编出的最大序号，通过循环使用序号仍能用 TCP 来传送。



5—37 在 TCP 的拥塞控制中什么是慢开始、拥塞避免、快重传和快恢复算法?这里每一种算法各起什么作用? “乘法减小”和“加法增大”各用在什么情况下?
答：慢开始：
       在主机刚刚开始发送报文段时，可先将拥塞窗口cwnd设置为一个最大报文段MSS的数值。在每收到一个对新的报文段的确认后，将拥塞窗口增加至多一个 MSS 的数值。用这样的方法逐步增大发送端的拥塞窗口 cwnd，可以分组注入到网络的速率更加合理。

拥塞避免：

当拥塞窗口值大于慢开始门限时，停止使用慢开始算法而改用拥塞避免算法。拥塞避免算法使发送的拥塞窗口每经过一个往返时延 RTT 就增加一个 MSS 的大小。

快重传算法规定:

发送端只要一连收到三个重复的 ACK 即可断定有分组丢失了,就应该立即重传丢失的报文段，而不必继续等待为该报文段设置的重传计时器的超时。
         快恢复算法：

当发送端收到连续三个重复的 ACK 时，就重新设置慢开始门限 ssthresh

与慢开始不同之处是拥塞窗口 cwnd 不是设置为 1而是设置为 ssthresh，

乘法减小：

是指不论在慢开始阶段还是拥塞避免阶段，只要出现一次超时即出现一次网络拥塞就把慢开始门限值 ssthresh 设置为当前的拥塞窗口值乘以 0.5。

当网络频繁出现拥塞时ssthresh 值就下降得很快以大大减少注入到网络中的分组数。

加法增大：

是指执行拥塞避免算法后在收到对所有报文段的确认后，即经过一个往返时间就把拥塞窗口 cwnd 增加一个 MSS 大小使拥塞窗口缓慢增大以防止网络过早出现拥塞。



#第六章 应用层

![image-20221210172903944](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210172903944.png)

##C/S方式

![image-20221210173705080](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210173705080.png)

## P2P方式

![image-20221210174037695](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210174037695.png)

![image-20221210174233596](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210174233596.png)

## 动态主机配置协议DHCP

![image-20221210174429344](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210174429344.png)

![image-20221210174958227](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210174958227.png)

![image-20221210175254911](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210175254911.png)

![image-20221210175331389](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210175331389.png)

![image-20221210175501213](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210175501213.png)

![image-20221210175532913](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210175532913.png)

![image-20221210175854056](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210175854056.png)

![image-20221210175931291](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210175931291.png)

##域名系统DNS 

![image-20221210180702253](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210180702253.png)

![image-20221210180952049](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210180952049.png)

![image-20221210181139273](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210181139273.png)

![image-20221210181348643](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210181348643.png)

![image-20221210181537619](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210181537619.png)

![image-20221210181611301](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210181611301.png)

![image-20221210182023621](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210182023621.png)

## 文件传送协议FTP

![image-20221210182145533](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210182145533.png)

![image-20221210182511815](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210182511815.png)

###主动模式

![image-20221210182734342](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210182734342.png)

### 被动模式

![image-20221210182829813](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210182829813.png)

![image-20221210182941388](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210182941388.png)

## 电子邮件

![image-20221210210208783](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210210208783.png)

![image-20221210210356218](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210210356218.png)

![image-20221210210501122](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210210501122.png)

![image-20221210210735960](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210210735960.png)

![image-20221210210924396](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210210924396.png)

![image-20221210211027076](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210211027076.png)

##邮件读取协议

![image-20221210211432057](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210211432057.png)

![image-20221210211648859](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221210211648859.png)

## 万维网

![image-20221211091125214](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211091125214.png)

![image-20221211091326820](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211091326820.png)

![image-20221211091719598](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211091719598.png)

![image-20221211091825399](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211091825399.png)

![image-20221211091956204](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211091956204.png)

### HTTP报文格式

![image-20221211092159926](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211092159926.png)

![image-20221211092257424](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211092257424.png)

![image-20221211092416698](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211092416698.png)

![image-20221211092526934](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211092526934.png)

![image-20221211092820635](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211092820635.png)

![image-20221211093124033](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211093124033.png)

![image-20221211093317831](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20221211093317831.png)

 
